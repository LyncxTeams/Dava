<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kuis Teknik Otomasi Industri</title>
<style>
  :root{
    --bg:#0d1117;
    --card:#161b22;
    --accent:#00ff9d;
    --muted:#9aa4a8;
    --btn:#00ff9d;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:"Poppins",sans-serif;
    background:var(--bg);
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    min-height:100vh;
    padding:20px;
  }
  .wrap{width:100%;max-width:720px;}
  .card{background:var(--card);border-radius:12px;padding:22px;box-shadow:0 6px 30px rgba(0,0,0,0.6);}
  .header{display:flex;align-items:center;justify-content:space-between;gap:12px;}
  h1{margin:0;color:var(--accent);font-size:20px;}
  p.lead{margin:8px 0 18px 0;color:var(--muted);}
  .info-row{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px;}
  .info{background:#111418;border-radius:10px;padding:10px 12px;min-width:140px;color:var(--muted);font-size:14px;}
  .levels{display:flex;gap:10px;margin-bottom:14px;flex-wrap:wrap;}
  .btn{background:transparent;border:2px solid var(--btn);color:var(--btn);padding:10px 16px;border-radius:10px;cursor:pointer;font-weight:600;transition:all .18s ease;}
  .btn:hover{background:var(--btn);color:#061013;box-shadow:0 6px 20px rgba(0,255,157,0.12);transform:translateY(-3px);}
  .actions{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap;}
  .small-muted{color:var(--muted);font-size:13px;margin-top:8px;}
  #quizArea{display:block;margin-top:16px;}
  .question{font-size:18px;margin-bottom:14px;color:#fff;}
  .options{display:flex;flex-direction:column;gap:14px;} /* jarak antar tombol */
  .option{
    background:#12161a;
    border:2px solid #fff; /* border putih */
    border-radius:10px;
    padding:14px;
    text-align:left;
    cursor:pointer;
    color:#fff;
    transition:all .14s ease;
  }
  .option:hover{background:#1c1f23} /* hover gelap ringan */
  .option.correct{background:#00ff9d;color:#05120b;} /* hijau untuk jawaban benar setelah klik */
  .option.wrong{background:#ff6b6b;color:#0f0b0b;} /* merah untuk jawaban salah */
  #timerWrap{margin-top:18px;text-align:center;color:var(--muted);font-size:14px;}
  #resultArea{display:none;margin-top:16px;}
  .resultCard{text-align:left;background:#0f1417;padding:14px;border-radius:10px;color:var(--muted);}
  footer{margin-top:18px;color:#9aa4a8;font-size:13px;text-align:center;}
  @media (max-width:480px){
    .info-row{flex-direction:column;}
    .levels{flex-direction:column;}
    .actions{flex-direction:column;}
  }
</style>
</head>
<body>
<div class="wrap">
  <!-- Dashboard -->
  <div class="card" id="dashboardCard">
    <div class="header">
      <div>
        <h1>Kuis Teknik Otomasi Industri</h1>
        <p class="lead">Uji kemampuan bidang otomasi industri — PLC, sensor, aktuator, komunikasi industri dan kontrol.</p>
      </div>
      <div style="text-align:right">
        <div style="font-size:13px;color:#bcd">Developer</div>
        <div style="font-weight:700;color:var(--muted)">Fuad Xyro (LyncxTeams)</div>
      </div>
    </div>
    <div class="info-row" style="margin-top:12px">
      <div class="info"><strong>Soal:</strong> Easy 10 • Medium 15 • Hard 20</div>
      <div class="info"><strong>Waktu:</strong> Easy 30m • Medium 25m • Hard 20m</div>
      <div class="info"><strong>Mode:</strong> Pilih level lalu mulai kuis</div>
    </div>

    <div class="levels">
      <button class="btn" onclick="startQuizLevel('easy')">Mulai - Easy (10)</button>
      <button class="btn" onclick="startQuizLevel('medium')">Mulai - Medium (15)</button>
      <button class="btn" onclick="startQuizLevel('hard')">Mulai - Hard (20)</button>
    </div>

    <div class="actions">
      <button class="btn" onclick="showLastResult()">Lihat Nilai Terakhir</button>
      <button class="btn" onclick="downloadLastResult()">Unduh Nilai</button>
      <button class="btn" onclick="showAbout()">Tentang Developer</button>
    </div>

    <div class="small-muted" id="lastSummary"></div>
  </div>

  <!-- Quiz -->
  <div class="card" id="quizCard" style="display:none; margin-top:14px;">
    <div id="quizHeader" style="display:flex;justify-content:space-between;align-items:center">
      <div style="font-size:15px;color:var(--muted)"><strong id="levelLabel"></strong></div>
      <div style="font-size:13px;color:var(--muted)">Soal <span id="qIndex">0</span> / <span id="qTotal">0</span></div>
    </div>

    <div id="quizArea" style="margin-top:12px">
      <div class="question" id="questionText">Memuat soal...</div>
      <div class="options" id="optionsWrap"></div>
      <div style="margin-top:10px;">
        <button class="btn" onclick="exitQuiz()">Keluar dari Soal</button>
      </div>
    </div>

    <div id="timerWrap">
      <div id="timerText">00:00</div>
    </div>
  </div>

  <!-- Result -->
  <div class="card" id="resultCard" style="display:none; margin-top:14px;">
    <h3 style="margin:0 0 10px 0;color:var(--accent)">Hasil Kuis</h3>
    <div class="resultCard" id="resultContent"></div>
    <div style="margin-top:12px;">
      <button class="btn" onclick="backToDashboard()">Kembali ke Dashboard</button>
      <button class="btn" onclick="downloadLastResult()">Unduh Nilai</button>
    </div>
  </div>

  <footer>© 2025 Kuis Teknik Otomasi Industri — Dibuat oleh Fuad Xyro (LyncxTeams)</footer>
</div>

<script>
// Soal acak lengkap
const questionPool = [
  {q:"Apa fungsi utama PLC dalam sistem otomasi industri?",choices:["Mengendalikan proses secara otomatis","Menyalakan lampu","Membaca suhu saja","Mentrigger alarm"],answer:0},
  {q:"Sensor proximity digunakan untuk mendeteksi apa?",choices:["Suhu ruangan","Cahaya","Benda logam tanpa kontak fisik","Tekanan udara"],answer:2},
  {q:"Komponen yang mengubah sinyal listrik menjadi gerakan disebut?",choices:["Sensor","Transduser","Aktuator","Relay"],answer:2},
  {q:"Fungsi relay dalam otomasi adalah sebagai?",choices:["Menggandakan arus","Saklar elektrik otomatis","Sensor tekanan","Penyimpan data"],answer:1},
  {q:"Pneumatik menggunakan energi dari?",choices:["Listrik","Air bertekanan","Minyak hidrolik","Panas"],answer:1},
  {q:"HMI adalah singkatan dari?",choices:["Human Machine Interface","High Mechanical Input","Hardware Manual Interface","Human Monitoring Instrument"],answer:0},
  {q:"Apa itu SCADA?",choices:["Sistem untuk pengawasan dan pengendalian jarak jauh","Sebuah jenis sensor","Protokol komunikasi serial","Alat ukur suhu"],answer:0},
  {q:"Protokol komunikasi industri yang umum adalah?",choices:["HTTP","Modbus","FTP","SMTP"],answer:1},
  {q:"Sensor suhu yang sering digunakan adalah?",choices:["Thermocouple","LDR","Potensiometer","Microphone"],answer:0},
  {q:"Aktuator linear biasanya digerakkan oleh?",choices:["Listrik","Uap","Air","Semua jawaban benar"],answer:3},
  {q:"Sensor tekanan digunakan untuk?",choices:["Mengukur tekanan gas atau cairan","Menyalakan lampu","Membaca suhu","Mendeteksi cahaya"],answer:0},
  {q:"Motor servo digunakan untuk?",choices:["Mengontrol posisi atau sudut tertentu","Mengukur tekanan","Mendeteksi benda","Menyimpan data"],answer:0},
  {q:"Fungsi HMI adalah?",choices:["Interaksi manusia dengan mesin","Menyimpan data","Mendeteksi benda","Menyalakan alarm"],answer:0},
  {q:"Protokol komunikasi Ethernet/IP digunakan untuk?",choices:["Koneksi antar perangkat industri","Koneksi Wi-Fi rumah","Mendeteksi sensor","Mengontrol lampu"],answer:0},
  {q:"Sensor level cairan biasanya digunakan untuk?",choices:["Mendeteksi tinggi permukaan cairan","Mengukur suhu","Membaca tekanan","Menyalakan lampu"],answer:0},
  {q:"Apa itu actuator pneumatik?",choices:["Aktuator yang digerakkan udara bertekanan","Sensor suhu","Relay listrik","HMI"],answer:0}
];

const levelConfig={easy:{count:10,time:1800},medium:{count:15,time:1500},hard:{count:20,time:1200}};
let state={inProgress:false,level:null,questions:[],index:0,correct:0,startTime:null,remaining:0,lastResult:null};

const dashboardCard=document.getElementById('dashboardCard');
const quizCard=document.getElementById('quizCard');
const resultCard=document.getElementById('resultCard');
const questionText=document.getElementById('questionText');
const optionsWrap=document.getElementById('optionsWrap');
const timerText=document.getElementById('timerText');
const levelLabel=document.getElementById('levelLabel');
const qIndex=document.getElementById('qIndex');
const qTotal=document.getElementById('qTotal');
const lastSummary=document.getElementById('lastSummary');
const resultContent=document.getElementById('resultContent');
let timerInterval=null;

function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]]}return arr}
function formatMMSS(sec){const m=Math.floor(sec/60);const s=sec%60;return `${m}:${String(s).padStart(2,'0')}`}
function formatDateForFile(d){const day=String(d.getDate()).padStart(2,'0');const mo=String(d.getMonth()+1).padStart(2,'0');const yy=d.getFullYear();const hh=String(d.getHours()).padStart(2,'0');const mm=String(d.getMinutes()).padStart(2,'0');const ss=String(d.getSeconds()).padStart(2,'0');return `${day}/${mo}/${yy} ${hh}.${mm}.${ss}`}

function loadState(){
  const raw=localStorage.getItem('quiz_app_state')
  if(!raw) return
  try{
    const s=JSON.parse(raw)
    state={...state,...s}
    if(state.inProgress){startQuizUIFromState()}
    else if(state.lastResult){showLastSummary()}
  }catch(e){console.error(e)}
}
function saveState(){localStorage.setItem('quiz_app_state',JSON.stringify(state))}

function startQuiz(level){
  const conf = levelConfig[level]
  const pool = shuffle([...questionPool])
  const qset = pool.slice(0, conf.count).map(q => {
    const ch = shuffle([...q.choices])
    return { q: q.q, choices: ch, answer: ch.findIndex(c => c === q.choices[q.answer]) }
  })

  state.inProgress = true
  state.level = level
  state.questions = qset
  state.index = 0
  state.correct = 0
  state.startTime = Date.now()
  state.remaining = conf.time
  saveState()
  startQuizUIFromState()
}
function startQuizLevel(level){startQuiz(level)}

function showQuestion(){
  if(state.index>=state.questions.length){return finishQuiz()}
  const cur=state.questions[state.index]
  questionText.textContent=cur.q
  qIndex.textContent=state.index+1
  qTotal.textContent=state.questions.length
  optionsWrap.innerHTML=''

  cur.choices.forEach((c,idx)=>{
    const btn=document.createElement('div')
    btn.className='option'
    btn.textContent=c
    btn.onclick=()=>selectAnswer(idx)
    optionsWrap.appendChild(btn)
  })

  document.querySelectorAll('.option').forEach(b=>b.style.pointerEvents='auto')
  saveState()
}

function selectAnswer(idx){
  const cur=state.questions[state.index]
  const options=document.querySelectorAll('.option')
  options.forEach(b=>b.style.pointerEvents='none')

  if(idx===cur.answer){
    options[idx].classList.add('correct')
    state.correct++
  } else{
    options[idx].classList.add('wrong')
    if(options[cur.answer]) options[cur.answer].classList.add('correct')
  }

  state.index++
  saveState()
  setTimeout(()=>{
    if(state.index<state.questions.length){showQuestion()}else{finishQuiz()}
  },700)
}

function startQuizUIFromState(){
  dashboardCard.style.display='none'
  quizCard.style.display='block'

  // warna teks level sesuai difficulty, label tetap muted
  let color = ''
  switch(state.level){
    case 'easy': color='#00ff9d'; break
    case 'medium': color='#ffcc00'; break
    case 'hard': color='#ff4d4d'; break
    default: color='var(--muted)'; break
  }

  levelLabel.textContent = state.level.toUpperCase()
  levelLabel.style.color = color

  qTotal.textContent = state.questions.length
  showQuestion()
  startTimer()
}

function startTimer(){
  if(timerInterval) clearInterval(timerInterval)
  updateTimerText()
  timerInterval=setInterval(()=>{
    state.remaining--
    if(state.remaining<=0){clearInterval(timerInterval);finishQuiz()}
    updateTimerText()
    saveState()
  },1000)
}

function updateTimerText(){
  timerText.textContent = `⏱️ ${formatMMSS(state.remaining)}`
  if(state.remaining <= 60){ // kurang dari 1 menit
    timerText.style.color = '#ff4d4d' // merah
  } else{
    timerText.style.color = 'var(--muted)' // default
  }
}

function finishQuiz(){
  if(timerInterval) clearInterval(timerInterval)
  state.inProgress=false
  const total=state.questions.length
  const score=state.correct
  const percent=Math.round((score/total)*100)
  const timeStr=formatMMSS(state.remaining)
  const timestamp=formatDateForFile(new Date())
  state.lastResult={level:state.level,score,total,percent,time:timeStr,timestamp}
  saveState()
  quizCard.style.display='none'
  resultCard.style.display='block'
  resultContent.innerHTML=`<div><strong>Hasil Kuis Teknik Otomasi Industri</strong></div>
  <div>-----------------------------</div>
  <div>Soal: ${state.level}</div>
  <div>Nilai: ${score} / ${total}   Persentase: ${percent}%   Waktu Selesai: ${timeStr}</div>
  <div>Tanggal: ${timestamp}</div>
  <div>-----------------------------</div>
  <div style="margin-top:10px;">Developer: Fuad Xyro (LyncxTeams)</div>`
  showLastSummary()
}

function showLastSummary(){
  if(state.lastResult){
    lastSummary.textContent=`Nilai terakhir: ${state.lastResult.score} / ${state.lastResult.total} (Level: ${state.lastResult.level}) Tgl: ${state.lastResult.timestamp}`
  } else{lastSummary.textContent='Belum ada hasil kuis sebelumnya.'}
}

function showLastResult(){
  const r=state.lastResult
  if(!r){alert('Belum ada hasil kuis.');return}
  alert(`Soal: ${r.level}\nNilai: ${r.score}/${r.total}\nPersentase: ${r.percent}%\nWaktu: ${r.time}\nTanggal: ${r.timestamp}`)
}

function downloadLastResult(){
  const r=state.lastResult
  if(!r){alert('Belum ada hasil kuis.');return}
  const lines=[
    `Hasil Kuis Teknik Otomasi Industri`,
    `-----------------------------`,
    `Soal: ${r.level}`,
    `Nilai: ${r.score} / ${r.total}       Persentase: ${r.percent}%       Waktu Selesai: ${r.time}`,
    `Tanggal: ${r.timestamp}`,
    `-----------------------------`,
    `Developer: Fuad Xyro (LyncxTeams)`
  ]
  const blob=new Blob([lines.join('\n')],{type:'text/plain'})
  const a=document.createElement('a')
  a.href=URL.createObjectURL(blob)
  a.download='hasil_kuis_otomasi.txt'
  a.click()
}

function backToDashboard(){
  quizCard.style.display='none'
  resultCard.style.display='none'
  dashboardCard.style.display='block'
}

function showAbout(){
  alert('Developer: Fuad Xyro (LyncxTeams)\nProject: Zenith Project\nContact: LyncxTeams')
}

function exitQuiz(){
  if(confirm('Apakah kamu yakin ingin keluar dari kuis? Hasil saat ini tidak akan disimpan.')){
    state.inProgress=false
    saveState()
    backToDashboard()
  }
}

loadState()
</script>
</body>
</html>
