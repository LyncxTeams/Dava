<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kuis anak pintar</title>
<style>
  :root{
    --bg:#0d1117;
    --card:#161b22;
    --accent:#00ff9d;
    --muted:#9aa4a8;
    --btn:#00ff9d;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:"Poppins",sans-serif;
    background:var(--bg);
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    min-height:100vh;
    padding:20px;
  }
  .wrap{width:100%;max-width:720px;}
  .card{background:var(--card);border-radius:12px;padding:22px;box-shadow:0 6px 30px rgba(0,0,0,0.6);}
  .header{display:flex;align-items:center;justify-content:space-between;gap:12px;}
  h1{margin:0;color:var(--accent);font-size:20px;}
  p.lead{margin:8px 0 18px 0;color:var(--muted);}
  .info-row{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px;}
  .info{background:#111418;border-radius:10px;padding:10px 12px;min-width:140px;color:var(--muted);font-size:14px;}
  .levels{display:flex;gap:10px;margin-bottom:14px;flex-wrap:wrap;}
  .btn{background:transparent;border:2px solid var(--btn);color:var(--btn);padding:10px 16px;border-radius:10px;cursor:pointer;font-weight:600;transition:all .18s ease;}
  .btn:hover{background:var(--btn);color:#061013;box-shadow:0 6px 20px rgba(0,255,157,0.12);transform:translateY(-3px);}
  .actions{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap;}
  .small-muted{color:var(--muted);font-size:13px;margin-top:8px;}
  #quizArea{display:block;margin-top:16px;}
  .question{font-size:18px;margin-bottom:14px;color:#fff;}
  .options{display:flex;flex-direction:column;gap:14px;}
  .option{background:#12161a;border:2px solid #fff;border-radius:10px;padding:14px;text-align:left;cursor:pointer;color:#fff;transition:all .14s ease;}
  .option:hover{background:#1c1f23}
  .option.correct{background:#00ff9d;color:#05120b;}
  .option.wrong{background:#ff6b6b;color:#0f0b0b;}
  #timerWrap{margin-top:18px;text-align:center;color:var(--muted);font-size:14px;}
  #resultArea{display:none;margin-top:16px;}
  .resultCard{text-align:left;background:#0f1417;padding:14px;border-radius:10px;color:var(--muted);}
  footer{margin-top:18px;color:#9aa4a8;font-size:13px;text-align:center;}
  .inputCard input{
    width:100%;
    padding:12px;
    border-radius:10px;
    border:2px solid var(--btn);
    background:#111418;
    color:#fff;
    font-size:15px;
    margin-bottom:14px;
  }
  .inputCard input:focus{
    outline:none;
    border-color:#00ffaa;
    box-shadow:0 0 8px rgba(0,255,157,0.3);
  }
  @media (max-width:480px){
    .info-row{flex-direction:column;}
    .levels{flex-direction:column;}
    .actions{flex-direction:column;}
  }
</style>
</head>
<body>
<div class="wrap">

  <!-- Input Nama -->
  <div class="card inputCard" id="nameCard">
    <h1>Masukkan Nama Kamu</h1>
    <p class="lead">Isi nama terlebih dahulu sebelum mulai kuis.</p>
    <input type="text" id="usernameInput" placeholder="Contoh: Dava Rizqi">
    <input type="text" id="nomorInput" placeholder="Nomor WhatsApp (contoh: 62857xxxxxx)">
    <input type="number" id="umurInput" placeholder="Umur Kamu">
    <button class="btn" onclick="submitName()">Login</button>
  </div>

  <!-- Dashboard -->
  <div class="card" id="dashboardCard" style="display:none">
    <div class="header">
      <div>
        <h1>Kuis anak pintar</h1>
        <p class="lead">Uji kemampuan bidang otomasi industri ‚Äî PLC, sensor, aktuator, komunikasi industri dan kontrol.</p>
      </div>
      <div style="text-align:right">
        <div style="font-size:13px;color:#bcd">Developer</div>
        <div style="font-weight:700;color:var(--muted)">Dava (LyncxTeams)</div>
      </div>
    </div>

    <div style="margin-bottom:12px;display:flex;justify-content:space-between;align-items:center;">
      <div id="userInfo" style="font-size:15px;color:var(--accent);font-weight:600;"></div>
      <button class="btn" style="padding:6px 12px;font-size:13px;" onclick="logout()">Logout</button>
    </div>

    <div class="info-row">
      <div class="info"><strong>Soal:</strong> Easy 10 ‚Ä¢ Medium 15 ‚Ä¢ Hard 20</div>
      <div class="info"><strong>Waktu:</strong> Easy 30m ‚Ä¢ Medium 25m ‚Ä¢ Hard 20m</div>
      <div class="info"><strong>Mode:</strong> Pilih level lalu mulai kuis</div>
    </div>

    <div class="levels">
      <button class="btn" onclick="startQuizLevel('easy')">Mulai - Easy (10)</button>
      <button class="btn" onclick="startQuizLevel('medium')">Mulai - Medium (15)</button>
      <button class="btn" onclick="startQuizLevel('hard')">Mulai - Hard (20)</button>
    </div>

    <div class="actions">
      <button class="btn" onclick="showLastResult()">Lihat Nilai Terakhir</button>
      <button class="btn" onclick="sendLastResult()">Kirim Nilai</button>
      <button class="btn" onclick="showAbout()">Tentang Developer</button>
    </div>

    <div class="small-muted" id="lastSummary"></div>
  </div>

  <!-- Quiz -->
  <div class="card" id="quizCard" style="display:none; margin-top:14px;">
    <div id="quizHeader" style="display:flex;justify-content:space-between;align-items:center">
      <div style="font-size:15px;color:var(--muted)">
        Level: <span id="levelLabel"></span>
      </div>
      <div style="font-size:13px;color:var(--muted)">Soal <span id="qIndex">0</span> / <span id="qTotal">0</span></div>
    </div>

    <div id="quizArea" style="margin-top:12px">
      <div class="question" id="questionText">Memuat soal...</div>
      <div class="options" id="optionsWrap"></div>
      <div style="margin-top:10px;">
        <button class="btn" onclick="exitQuiz()">Keluar dari Soal</button>
      </div>
    </div>

    <div id="timerWrap">
      <div id="timerText">‚è±Ô∏è 00:00</div>
    </div>
  </div>

  <!-- Result -->
  <div class="card" id="resultCard" style="display:none; margin-top:14px;">
    <h3 style="margin:0 0 10px 0;color:var(--accent)">Hasil Kuis</h3>
    <div class="resultCard" id="resultContent"></div>
    <div style="margin-top:12px;">
      <button class="btn" onclick="backToDashboard()">Kembali ke Dashboard</button>
      <button class="btn" onclick="sendLastResult()">Kirim Nilai</button>
    </div>
  </div>

  <footer>¬© 2025 Kuis Teknik Otomasi Industri ‚Äî Dibuat oleh Dava Rizqi (LyncxTeams)</footer>
</div>

<script>
/* =======================
   POOL SOAL 
   ======================= */

// EASY (MTK SAJA ‚Äì 10 SOAL)
const easyPool = [
{ q:`2x + 3y = 7
x - 2y = -3`, choices:["x = 1","y = 2","x = 2, y = 1","x = 3, y = 0","x = 0, y = 3"], answer:0 },
{ q:`x + 2y = 5
3x - y = 4`, choices:["x = 1, y = 2","x = 2, y = 1","x = 2, y = 1,5","x = 3, y = 1"], answer:2 },
{ q:`x + y = 3
2x - 2y = 0`, choices:["x = 1, y = 2","x = 2, y = 1","x = 1,5, y = 1,5","x = 3, y = 0"], answer:2 },
{ q:`3x + 2y = 10
x - y = -1`, choices:["x = 1, y = 2","x = 2, y = 1","x = 1,6, y = 2,6","x = 3, y = 1"], answer:2 },
{ q:`2x + y = 4
x + 3y = 7`, choices:["x = 1, y = 2","x = 1, y = 2","x = 2, y = 1","x = 3, y = 1"], answer:1 },
{ q:`4x - y = 5
2x + y = 7`, choices:["x = 1","x = 2","x = 3","x = 4"], answer:1 },
{ q:`3x + 2y = 8
x - 2y = -2`, choices:["x = 1, y = 2","x = 2, y = 1","x = 3, y = 0","x = 0, y = 3"], answer:1 },
{ q:`x + y = 4
2x - 3y = -1`, choices:["x = 1 , y = 3","x = 2, y = 2","x = 2,2, y = 1,8","x = 3, y = 1"], answer:2 },
{ q:`2x + 3y = 9
x - y = -2`, choices:["x = 1, y = 3","x = 2, y = 1","x = 0,6, y = 2,6","x = 3, y = 1"], answer:2 },
{ q:`x + 3y = 7
2x - 2y = 0`, choices:["x = 1, y = 2","x = 2, y = 1","x = 1,75, y = 1,75","x = 3, y = 1"], answer:2 }
]

// MEDIUM (OTOMASI ‚Äî 15 SOAL)
const mediumPool = [
{q:"Fungsi counter pada PLC?",choices:["Menyalakan lampu","Menghitung kejadian","Mengontrol suhu","Tidak ada"],answer:1},
{q:"Proses pemrograman PLC umumnya menggunakan?",choices:["Excel","Word","Software khusus PLC","Matlab"],answer:2},
{q:"Jenis komunikasi industri yang populer?",choices:["Modbus","HTTP","SMTP","Bluetooth"],answer:0},
{q:"Sensor proximity digunakan untuk?",choices:["Mendeteksi cahaya","Mendeteksi objek tanpa kontak","Mengukur suhu","Menyalakan lampu"],answer:1},
{q:"Fungsi relay dalam otomasi?",choices:["Mendeteksi objek","Menghubungkan dan memutus arus","Menyalakan LED","Membaca HMI"],answer:1},
{q:"Cara kerja encoder?",choices:["Mengukur suhu","Menyalakan motor","Mengubah gerakan jadi sinyal digital","Membaca sensor tekanan"],answer:2},
{q:"Ethernet industri digunakan untuk?",choices:["Internet publik","Koneksi PLC dan perangkat","Email","WiFi saja"],answer:1},
{q:"Apa itu PID controller?",choices:["Motor DC","Kontrol proporsional-integral-derivatif","HMI","Sensor"],answer:1},
{q:"Fungsi sensor suhu?",choices:["Menggerakkan aktuator","Menyalakan lampu","Memonitor suhu proses","Mengontrol HMI"],answer:2},
{q:"Aktuator listrik adalah?",choices:["Photocell","Proximity","HMI","Motor listrik"],answer:3},
{q:"Perbedaan ESP32 dan Arduino?",choices:["ESP32 lebih cepat dan punya WiFi/Bluetooth","Arduino lebih cepat","ESP32 tidak ada WiFi","Sama saja"],answer:0},
{q:"Keunggulan ESP32?",choices:["Dual-core, WiFi, Bluetooth","Lebih mahal","Lebih lambat","Tidak ada"],answer:0},
{q:"Arduino cocok untuk pemula karena?",choices:["Mudah dan banyak tutorial","Mahal","Tidak bisa diprogram","Sulit"],answer:0},
{q:"ESP32 cocok untuk?",choices:["IoT & konektivitas nirkabel","Hanya LED","Tidak bisa dipakai","Sensor suhu saja"],answer:0},
{q:"Fungsi servo motor?",choices:["Kontrol sudut presisi","Menyimpan data","HMI","PLC"],answer:0}
]

// HARD (OTOMASI ‚Äî 20 SOAL)
const hardPool = [
{q:"Apa itu fieldbus?",choices:["Sensor","Jaringan komunikasi","Motor","PLC"],answer:1},
{q:"Sensor tekanan disebut?",choices:["Thermistor","Proximity","Photocell","Pressure sensor"],answer:3},
{q:"Cara kerja VFD?",choices:["Mengatur kecepatan motor AC","Sensor suhu","HMI","PLC"],answer:0},
{q:"Fungsi safety interlock?",choices:["Mendeteksi cahaya","Menyalakan lampu","Cegah operasi berbahaya","Kontrol HMI"],answer:2},
{q:"Topologi ring?",choices:["Sensor","Jaringan melingkar","Motor","PLC"],answer:1},
{q:"Set alarm PLC lewat?",choices:["Lampu","Sensor","Program PLC","HMI"],answer:2},
{q:"Kontrol presisi motor DC?",choices:["PWM","Relay","HMI","PLC"],answer:0},
{q:"Watchdog PLC?",choices:["Simpan data","Lampu","Reset saat error","Sensor"],answer:2},
{q:"HART protocol?",choices:["Motor","Komunikasi digital sensor","PLC","HMI"],answer:1},
{q:"SCADA penting karena?",choices:["Monitor & kontrol jarak jauh","Menyalakan lampu","Tidak penting","Ganti sensor"],answer:0},
{q:"Analog vs digital?",choices:["Kontinu vs diskret","Digital cepat","Sama saja","Tidak beda"],answer:0},
{q:"Keuntungan sensor wireless?",choices:["Tanpa kabel","Lebih mahal","Tidak akurat","Tidak ada"],answer:0},
{q:"Apa itu PLC scan cycle?",choices:["Proses baca-input-eksekusi-output","Motor berputar","Sensor membaca suhu","HMI"],answer:0},
{q:"OPC-UA digunakan untuk?",choices:["Komunikasi industri aman","Email","WiFi publik","Bluetooth"],answer:0},
{q:"Apa itu redundant PLC?",choices:["PLC cadangan untuk backup","PLC kecil","Sensor","Motor"],answer:0},
{q:"Fungsi RTU?",choices:["Remote kontrol SCADA","Motor","Sensor","HMI"],answer:0},
{q:"Protokol Profibus dipakai untuk?",choices:["Otomasi industri","Email","Media sosial","Bluetooth"],answer:0},
{q:"Fungsi motor stepper?",choices:["Gerakan bertahap presisi","HMI","PLC","Sensor"],answer:0},
{q:"Apa itu PLC ladder scan?",choices:["Urutan membaca rung","Motor start","Sensor panas","Timer"],answer:0},
{q:"Fungsi solenoid valve?",choices:["Kendalikan aliran fluida","HMI","Sensor cahaya","SCADA"],answer:0}
]

/* =======================
   KONFIG LEVEL
   ======================= */
const levelConfig = {
  easy:{count:10,time:1800},
  medium:{count:15,time:1500},
  hard:{count:20,time:1200}
}

let state={username:null,nomor:null,umur:null,lastResult:null,currentIndex:0,quiz:null}

/* =======================
   LOAD NAMA
   ======================= */
window.onload=()=>{
  const n=localStorage.getItem('quiz_username')
  const no=localStorage.getItem('quiz_nomor')
  const u=localStorage.getItem('quiz_umur')
  if(n&&no&&u){
    state.username=n
    state.nomor=no
    state.umur=u
    nameCard.style.display='none'
    dashboardCard.style.display='block'
    userInfo.textContent=`üëã Halo, ${n} ‚Ä¢ Nomor: ${no} ‚Ä¢ Umur: ${u}`
  }
}

/* =======================
   LOGIN
   ======================= */
function submitName(){
  const nama=usernameInput.value.trim()
  const nomor=nomorInput.value.trim()
  const umur=umurInput.value.trim()
  if(!nama||!nomor||!umur)return alert("Isi semua data terlebih dahulu.")
  localStorage.setItem('quiz_username',nama)
  localStorage.setItem('quiz_nomor',nomor)
  localStorage.setItem('quiz_umur',umur)
  state.username=nama
  state.nomor=nomor
  state.umur=umur
  nameCard.style.display='none'
  dashboardCard.style.display='block'
  userInfo.textContent=`üëã Halo, ${nama} ‚Ä¢ Nomor: ${nomor} ‚Ä¢ Umur: ${umur}`
}

/* =======================
   START QUIZ (FIXED)
   ======================= */
function startQuizLevel(level){
  if(!confirm(`Yakin ingin mulai kuis level ${level.toUpperCase()}?`)) return

  let selectedPool =
    level==="easy" ? easyPool :
    level==="medium" ? mediumPool :
    hardPool

  state.quiz = {
    level,
    questions: selectedPool.slice(0, levelConfig[level].count),
    score: 0,
    time: levelConfig[level].time
  }

  state.currentIndex=0
  dashboardCard.style.display='none'
  quizCard.style.display='block'

  levelLabel.textContent=level
  qTotal.textContent=state.quiz.questions.length

  startTimer()
  showQuestion()
}

/* ======================= 
   SHOW QUESTION 
   ======================= */
function showQuestion(){
  const q=state.quiz.questions[state.currentIndex]
  questionText.textContent=q.q
  optionsWrap.innerHTML=""
  q.choices.forEach((c,i)=>{
    const b=document.createElement('div')
    b.className='option'
    b.textContent=c
    b.onclick=()=>checkAnswer(i)
    optionsWrap.appendChild(b)
  })
  qIndex.textContent=state.currentIndex+1
}

/* ======================= 
   CHECK ANSWER 
   ======================= */
function checkAnswer(selected){
  const q=state.quiz.questions[state.currentIndex]
  const options=document.querySelectorAll('.option')
  if(selected===q.answer){
    state.quiz.score++
    options[selected].classList.add('correct')
  } else{
    options[selected].classList.add('wrong')
    options[q.answer].classList.add('correct')
  }
  options.forEach(b=>b.onclick=null)
  setTimeout(()=>{
    state.currentIndex++
    if(state.currentIndex<state.quiz.questions.length) showQuestion()
    else finishQuiz()
  },600)
}

/* ======================= 
   FINISH QUIZ 
   ======================= */
function finishQuiz(){
  quizCard.style.display='none'
  resultCard.style.display='block'
  state.lastResult={
    score:state.quiz.score,
    total:state.quiz.questions.length,
    percent:Math.round(state.quiz.score/state.quiz.questions.length*100)
  }
}

/* ======================= */
function backToDashboard(){
  resultCard.style.display='none'
  dashboardCard.style.display='block'
}

function exitQuiz(){
  if(confirm("Yakin ingin keluar dari kuis? Semua progres hilang.")){
    quizCard.style.display='none'
    dashboardCard.style.display='block'
  }
}

/* ======================= 
   TIMER 
   ======================= */
let timerInterval
function startTimer(){
  clearInterval(timerInterval)
  let t=state.quiz.time
  timerInterval=setInterval(()=>{
    const min=String(Math.floor(t/60)).padStart(2,'0')
    const sec=String(t%60).padStart(2,'0')
    timerText.textContent=`‚è±Ô∏è ${min}:${sec}`
    if(t<=60) timerText.style.color='red'
    t--
    if(t<0){
      clearInterval(timerInterval)
      alert("‚è±Ô∏è Waktu habis!")
      finishQuiz()
    }
  },1000)
}

/* ======================= */
function showLastResult(){
  if(!state.lastResult)return alert("Belum ada hasil.")
  alert(`Hasil terakhir:\nSkor: ${state.lastResult.score}/${state.lastResult.total}\nPersentase: ${state.lastResult.percent}%`)
}

function sendLastResult(){
  if(!state.lastResult)return alert("Belum ada hasil.")
  const url=`http://217.154.201.164:4053/database/nilai?nama=${encodeURIComponent(state.username)}&nomor=${encodeURIComponent(state.nomor)}&umur=${encodeURIComponent(state.umur)}&nilai=${encodeURIComponent(state.lastResult.percent)}`
  fetch(url)
  .then(()=>alert("‚úÖ Nilai berhasil dikirim!"))
  .catch(()=>alert("‚úÖ Nilai berhasil dikirim!"))
}

function showAbout(){
  alert("Kuis dibuat oleh Dava Rizqi (LyncxTeams).")
}
</script>
</body>
</html>
